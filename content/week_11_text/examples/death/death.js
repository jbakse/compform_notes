var life_table = [
	[0.006569, 100000, 76.18, 0.005513, 100000, 80.95],
	[0.000444, 99343, 75.69, 0.000382, 99449, 80.39],
	[0.000291, 99299, 74.72, 0.000218, 99411, 79.42],
	[0.000226, 99270, 73.74, 0.000166, 99389, 78.44],
	[0.000173, 99248, 72.76, 0.000143, 99373, 77.45],
	[0.000158, 99230, 71.77, 0.000127, 99358, 76.47],
	[0.000147, 99215, 70.78, 0.000116, 99346, 75.48],
	[0.000136, 99200, 69.79, 0.000106, 99334, 74.48],
	[0.000121, 99187, 68.80, 0.000098, 99324, 73.49],
	[0.000104, 99175, 67.81, 0.000091, 99314, 72.50],
	[0.000092, 99164, 66.82, 0.000086, 99305, 71.51],
	[0.000097, 99155, 65.82, 0.000089, 99296, 70.51],
	[0.000134, 99146, 64.83, 0.000102, 99288, 69.52],
	[0.000210, 99132, 63.84, 0.000128, 99277, 68.52],
	[0.000317, 99112, 62.85, 0.000164, 99265, 67.53],
	[0.000433, 99080, 61.87, 0.000205, 99248, 66.54],
	[0.000547, 99037, 60.90, 0.000246, 99228, 65.56],
	[0.000672, 98983, 59.93, 0.000285, 99204, 64.57],
	[0.000805, 98917, 58.97, 0.000319, 99175, 63.59],
	[0.000941, 98837, 58.02, 0.000350, 99144, 62.61],
	[0.001084, 98744, 57.07, 0.000383, 99109, 61.63],
	[0.001219, 98637, 56.13, 0.000417, 99071, 60.66],
	[0.001314, 98517, 55.20, 0.000446, 99030, 59.68],
	[0.001357, 98387, 54.27, 0.000469, 98986, 58.71],
	[0.001362, 98254, 53.35, 0.000487, 98939, 57.74],
	[0.001353, 98120, 52.42, 0.000505, 98891, 56.76],
	[0.001350, 97987, 51.49, 0.000525, 98841, 55.79],
	[0.001353, 97855, 50.56, 0.000551, 98789, 54.82],
	[0.001371, 97722, 49.63, 0.000585, 98735, 53.85],
	[0.001399, 97588, 48.69, 0.000626, 98677, 52.88],
	[0.001432, 97452, 47.76, 0.000672, 98615, 51.92],
	[0.001464, 97312, 46.83, 0.000720, 98549, 50.95],
	[0.001497, 97170, 45.90, 0.000766, 98478, 49.99],
	[0.001530, 97024, 44.96, 0.000806, 98403, 49.02],
	[0.001568, 96876, 44.03, 0.000846, 98323, 48.06],
	[0.001617, 96724, 43.10, 0.000891, 98240, 47.10],
	[0.001682, 96568, 42.17, 0.000946, 98153, 46.15],
	[0.001759, 96405, 41.24, 0.001013, 98060, 45.19],
	[0.001852, 96236, 40.31, 0.001094, 97960, 44.23],
	[0.001963, 96057, 39.39, 0.001190, 97853, 43.28],
	[0.002092, 95869, 38.46, 0.001296, 97737, 42.33],
	[0.002246, 95668, 37.54, 0.001413, 97610, 41.39],
	[0.002436, 95453, 36.62, 0.001549, 97472, 40.45],
	[0.002669, 95221, 35.71, 0.001706, 97321, 39.51],
	[0.002942, 94967, 34.81, 0.001881, 97155, 38.57],
	[0.003244, 94687, 33.91, 0.002069, 96972, 37.65],
	[0.003571, 94380, 33.02, 0.002270, 96772, 36.72],
	[0.003926, 94043, 32.13, 0.002486, 96552, 35.81],
	[0.004309, 93674, 31.26, 0.002716, 96312, 34.89],
	[0.004719, 93270, 30.39, 0.002960, 96050, 33.99],
	[0.005156, 92830, 29.53, 0.003226, 95766, 33.09],
	[0.005622, 92352, 28.68, 0.003505, 95457, 32.19],
	[0.006121, 91832, 27.84, 0.003779, 95123, 31.30],
	[0.006656, 91270, 27.01, 0.004040, 94763, 30.42],
	[0.007222, 90663, 26.19, 0.004301, 94380, 29.54],
	[0.007844, 90008, 25.38, 0.004592, 93974, 28.67],
	[0.008493, 89302, 24.57, 0.004920, 93543, 27.80],
	[0.009116, 88544, 23.78, 0.005266, 93083, 26.93],
	[0.009690, 87736, 22.99, 0.005630, 92592, 26.07],
	[0.010253, 86886, 22.21, 0.006028, 92071, 25.22],
	[0.010872, 85995, 21.44, 0.006479, 91516, 24.37],
	[0.011591, 85060, 20.67, 0.007001, 90923, 23.52],
	[0.012403, 84075, 19.90, 0.007602, 90287, 22.68],
	[0.013325, 83032, 19.15, 0.008294, 89600, 21.85],
	[0.014370, 81925, 18.40, 0.009082, 88857, 21.03],
	[0.015553, 80748, 17.66, 0.009990, 88050, 20.22],
	[0.016878, 79492, 16.93, 0.011005, 87171, 19.42],
	[0.018348, 78151, 16.21, 0.012097, 86211, 18.63],
	[0.019969, 76717, 15.51, 0.013261, 85168, 17.85],
	[0.021766, 75185, 14.81, 0.014529, 84039, 17.09],
	[0.023840, 73548, 14.13, 0.015991, 82818, 16.33],
	[0.026162, 71795, 13.47, 0.017662, 81494, 15.59],
	[0.028625, 69917, 12.81, 0.019486, 80054, 14.86],
	[0.031204, 67915, 12.18, 0.021467, 78494, 14.14],
	[0.033997, 65796, 11.55, 0.023658, 76809, 13.44],
	[0.037200, 63559, 10.94, 0.026223, 74992, 12.76],
	[0.040898, 61195, 10.34, 0.029159, 73026, 12.09],
	[0.045040, 58692, 9.76, 0.032331, 70896, 11.44],
	[0.049664, 56048, 9.20, 0.035725, 68604, 10.80],
	[0.054844, 53265, 8.66, 0.039469, 66153, 10.18],
	[0.060801, 50344, 8.13, 0.043828, 63542, 9.58],
	[0.067509, 47283, 7.62, 0.048896, 60757, 9.00],
	[0.074779, 44091, 7.14, 0.054577, 57786, 8.43],
	[0.082589, 40794, 6.68, 0.060909, 54633, 7.89],
	[0.091135, 37424, 6.23, 0.068019, 51305, 7.37],
	[0.100680, 34014, 5.81, 0.076054, 47815, 6.87],
	[0.111444, 30589, 5.40, 0.085148, 44179, 6.40],
	[0.123571, 27180, 5.02, 0.095395, 40417, 5.94],
	[0.137126, 23822, 4.65, 0.106857, 36561, 5.52],
	[0.152092, 20555, 4.31, 0.119557, 32655, 5.12],
	[0.168426, 17429, 4.00, 0.133502, 28751, 4.75],
	[0.186063, 14493, 3.70, 0.148685, 24912, 4.40],
	[0.204925, 11797, 3.44, 0.165088, 21208, 4.08],
	[0.224931, 9379, 3.19, 0.182685, 17707, 3.79],
	[0.245995, 7270, 2.97, 0.201442, 14472, 3.53],
	[0.266884, 5481, 2.78, 0.220406, 11557, 3.29],
	[0.287218, 4018, 2.61, 0.239273, 9010, 3.08],
	[0.306593, 2864, 2.46, 0.257714, 6854, 2.89],
	[0.324599, 1986, 2.33, 0.275376, 5088, 2.72]
];

// Ask jQuery to run the function named `main` when the document is loaded.
$(document).ready(main);

function main() {
	console.log("hello");

	$('#age-input').on('input', function() {
    	// get the value of the input element
    	var age = $(this).val();

    	// make sure its treated as number
    	age = Number(age);

    	updateText(age);
	});

	updateText(20);
}

function updateText(age) {
	var v;

	$("#age").text(age);
	
	v = life_table[age][0] * 100;
	v = roundTo1Place(v) + "%";
	$("#male-death-chance").text(v);

	v = life_table[age][2];
	v = roundTo1Place(v);
	$("#male-years-left").text(v);

	v = life_table[age][3] * 100;
	v = roundTo1Place(v) + "%";
	$("#female-death-chance").text(v);

	v = life_table[age][5];
	v = roundTo1Place(v);
	$("#female-years-left").text(v);

	var yearsLeft = (life_table[age][2] + life_table[age][5]) / 2;
	var lifespan = age + yearsLeft;
	var percentLeft = (yearsLeft / lifespan) * 100;
	percentLeft = roundTo1Place(percentLeft) + "%";
	$("#percent-left").text(percentLeft);
}

function roundTo1Place(value){
	return Math.floor(value * 10)/10;
}
